{% extends 'cme/layout.html' %}

<!-- Static -->
{% load static %}

<!-- Tags -->
{% load tags %}

<!-- Title -->
{% block title %} Gráfico {% endblock title %}

<!-- CSS -->
{% block css %}
<link rel="stylesheet" href="{% static 'cme/css/block_4.css' %}" />
{% endblock css %}

<!-- JS -->
{% block js %}
<!-- Vars for JS -->
{{ dates|json_script:'dates' }} {{ blocks_for_graph|json_script:'blocks_for_graph' }} {{ scores|json_script:'scores' }}

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{% static 'cme/js/graph.js' %}"></script>
{% endblock js %}

<!-- Main -->
{% block main %}
<div id="container">
	<!-- Results -->
	<div id="result" style="display: flex">
		<div id="score-container">
			<h1 id="results">{{ survey }}</h1>
			<ol>
				{% for i in blocks|times %}
				<div class="block">
					<li>{{ blocks|get_item:i }}:</li>
					<span><span class="block-score">{{ scores.0|get_item:i }}</span>/20</span>
				</div>
				{% endfor %}
				<div id="final-container">
					<h2 id="final-h2">Tu calificación: <span id="final-score">{{ overall }}</span>/100</h2>
				</div>
			</ol>
		</div>

		<!-- Graph -->
		<div id="graph-container">
			<h1>{{ survey }}</h1>
			<canvas id="graph"></canvas>
		</div>

		<form id="next" action="{% url 'cme:thanks' %}">
			<input type="submit" class="btn-contrast" value="Continuar" />
		</form>
	</div>
</div>
{% endblock main %}
